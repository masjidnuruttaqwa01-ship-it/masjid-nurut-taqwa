<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kompas Qiblat</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  font-family:Poppins, sans-serif;
  background:linear-gradient(135deg,#0f9d58,#0a5c3a);
  color:white;
  overflow:hidden;
}

/* JUDUL */
.title{
  font-size:26px;
  font-weight:700;
  margin-bottom:5px;
}

.subtitle{
  font-size:14px;
  opacity:.9;
  margin-bottom:25px;
}

/* KOMPAS */
.compass{
  position:relative;
  width:280px;
  height:280px;
  border-radius:50%;
  background:radial-gradient(circle at center,#1b7a52,#0e3f2a);
  box-shadow:
    inset 0 0 40px rgba(0,0,0,.4),
    0 20px 40px rgba(0,0,0,.5);
  display:flex;
  justify-content:center;
  align-items:center;
}

.center-dot{
  width:18px;
  height:18px;
  background:white;
  border-radius:50%;
  z-index:2;
}

/* PANAH */
.arrow{
  position:absolute;
  width:8px;
  height:130px;
  background:gold;
  border-radius:10px;
  top:50%;
  left:50%;
  transform-origin:center bottom;
  transform:translate(-50%,-100%) rotate(0deg);
  box-shadow:0 0 15px gold;
  transition:transform .08s linear;
}

/* STATUS */
.status{
  margin-top:25px;
  font-size:15px;
  text-align:center;
}

.good{
  color:#00ff9c;
  font-weight:600;
}

/* BUTTON */
button{
  margin-top:20px;
  padding:12px 25px;
  border:none;
  border-radius:30px;
  background:gold;
  font-weight:600;
  font-size:15px;
  cursor:pointer;
  box-shadow:0 10px 20px rgba(0,0,0,.4);
}
</style>
</head>

<body>

<div class="title">ðŸ§­ Kompas Qiblat</div>
<div class="subtitle">Masjid Nurut Taqwa</div>

<div class="compass">
  <div class="arrow" id="arrow"></div>
  <div class="center-dot"></div>
</div>

<div class="status" id="statusText">
Izinkan lokasi & sensor
</div>

<button id="startBtn">Aktifkan Kompas</button>

<script>
let qiblaDeg = 0;
let heading = 0;
let smoothHeading = 0;
let lastVibrate = false;

/* ===============================
   HITUNG ARAH KA'BAH
=================================*/
function calculateQibla(lat, lon){
  const kaabaLat = 21.4225 * Math.PI/180;
  const kaabaLon =
