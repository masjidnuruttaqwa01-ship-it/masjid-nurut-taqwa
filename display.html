<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Display Masjid ‚Äì Jadwal Sholat & Live Haramain</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  
  margin:0;
  font-family:Poppins,sans-serif;
  color:#fff;
  overflow:hidden;
}

/* ===== BACKGROUND ===== */
.bg{
  position:fixed;
  inset:0;
  z-index:-2;
  background-size:cover;
  background-position:center;
  animation:bgSlide 30s infinite;
}
@keyframes bgSlide{
  0%{background-image:url('https://images.unsplash.com/photo-1585030179234-6d0f3a38d2f4')}
  33%{background-image:url('https://images.unsplash.com/photo-1588072432836-e10032774350')}
  66%{background-image:url('https://images.unsplash.com/photo-1600185365483-26d7c7f4c32c')}
  100%{background-image:url('https://images.unsplash.com/photo-1585030179234-6d0f3a38d2f4')}
}

/* ===== OVERLAY ===== */
.overlay{
  background:rgba(0,0,0,.55);
  min-height:100vh;
  position:relative;
  z-index:1;
}
.overlay{
  position:relative;
}  
/* ===== HEADER ===== */
.header{
  padding:18px 28px;
  background:linear-gradient(135deg,#064e3b,#022c22);
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 6px 20px rgba(0,0,0,.4);
}

.header b{
  font-size:26px;
  letter-spacing:.5px;
  color:#fde68a;
  text-shadow:0 0 10px rgba(253,230,138,.4);
}

.clock{
  font-size:42px;
  font-weight:700;
  color:#ffffff;
  text-shadow:0 0 12px rgba(34,197,94,.8);
}
/* ===== INFO ===== */
.info{
  text-align:center;
  margin:8px 0;
  font-size:14px;
}

/* ===== SHOLAT ===== */
.sholat-bar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:6px;
  padding:12px;
}
.sholat{
  background:#0f766e;
  padding:14px 6px;
  border-radius:16px;
  text-align:center;
}
.sholat b{display:block;font-size:18px}
.active{
  background:#7c3aed;
  animation:pulse 1.2s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(124,58,237,.7)}
  70%{box-shadow:0 0 0 25px rgba(124,58,237,0)}
  100%{box-shadow:0 0 0 0 rgba(124,58,237,0)}
}

/* ===== AZAN ===== */
.azan{
  text-align:center;
  font-size:46px;
  font-weight:700;
  color:#facc15;
  display:none;
}

/* ===== IQOMAH ===== */
.iqomah{
  text-align:center;
  font-size:42px;
  font-weight:700;
  color:#22c55e;
  display:none;
}

/* ===== RUNNING TEXT ===== */
.marquee{
  position:absolute;
  bottom:0;
  width:100%;
  background:#064e3b;
  padding:10px;
  font-size:18px;
  white-space:nowrap;
  overflow:hidden;
}
.marquee span{
  display:inline-block;
  padding-left:100%;
  animation:marquee 25s linear infinite;
}
@keyframes marquee{
  0%{transform:translateX(0)}
  100%{transform:translateX(-100%)}
}

/* ===== LIVE HARAMAIN (AMAN, TIDAK NUTUP JADWAL) ===== */
.haramain-section{
  position:absolute;
  top:220px;              /* ‚¨ÖÔ∏è INI KUNCI UTAMA (turun di bawah header + jadwal) */
  left:0;
  right:0;

  z-index:10;             /* ‚¨ÖÔ∏è lebih rendah dari header & sholat */
  display:flex;
  justify-content:center;

  background:transparent;
  pointer-events:none;

  opacity:0;
  transition:opacity .6s ease;
}

.haramain-section.show{
  opacity:1;
  pointer-events:auto;
}
/* FRAME VIDEO */
.haramain-frame{
  width:90%;
  max-width:1000px;
  aspect-ratio:16 / 9;

  border-radius:20px;
  overflow:hidden;

  background:#000;
  box-shadow:0 20px 50px rgba(0,0,0,.35);
}

/* VIDEO */
.haramain-frame iframe{
  width:100%;
  height:100%;
  border:0;
}
  <meta name="orientation" content="landscape">
<meta name="screen-orientation" content="landscape">
<meta name="x5-orientation" content="landscape">
/* ===== MODE TV / ANDROID TV ===== */
@media screen and (min-width: 1024px) {

  body{
    font-size:18px;
  }

  .header{
    padding:18px 32px;
  }

  .header b{
    font-size:26px;
  }

  .clock{
    font-size:54px;
  }

  .info{
    font-size:18px;
    margin:12px 0;
  }

  .sholat-bar{
    padding:16px 32px;
    gap:12px;
  }

  .sholat{
    padding:18px 8px;
    border-radius:20px;
  }

  .sholat b{
    font-size:22px;
  }

  .azan{
    font-size:72px;
    margin-top:20px;
  }

  .iqomah{
    font-size:64px;
  }

  .marquee{
    font-size:22px;
    padding:14px;
  }

  /* LIVE HARAMAIN ‚Äì POSISI AMAN DI TV */
  .haramain-section{
    top:260px;
  }

  .haramain-frame{
    max-width:1280px;
    border-radius:28px;
  }
  }
  .main-content{
  min-height:calc(100vh - 180px); /* header + footer */
  }
  .main-content{
  min-height:calc(100vh - 220px); /* header + jadwal + marquee */
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding-top:20px;
}

/* UBAH haramain-section */
.haramain-section{
  position:relative;
  inset:auto;
  background:transparent;
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  opacity:1;
  pointer-events:auto;
}
</style>

</head>

<body onclick="openFullscreen()">
  <button id="enableSound"
style="
position:fixed;
top:16px;
right:16px;
z-index:99999;
padding:12px 16px;
border-radius:14px;
border:none;
background:#22c55e;
color:#fff;
font-weight:700;
font-size:14px;
box-shadow:0 8px 20px rgba(0,0,0,.35);
">
üîä Aktifkan Suara Live Ka'bah
  </button>

<div class="bg"></div>

<div class="overlay">

  <!-- HEADER -->
  <div class="header">
    <b>üïå Masjid Nurut Taqwa</b>
    <div class="clock" id="clock">00:00</div>
  </div>

  <!-- TANGGAL -->
  <div class="info" id="tanggal"></div>

  <!-- AZAN / IQOMAH -->
  <div class="azan" id="azanText">AZAN</div>
  <div class="iqomah" id="iqomahText">IQOMAH 10:00</div>

  <!-- JADWAL SHOLAT -->
  <div class="sholat-bar" id="sholatBar"></div>

  <!-- ===== AREA TENGAH (WAJIB ADA) ===== -->
  <div class="main-content">

    <!-- LIVE HARAMAIN -->
    <div class="haramain-section show" id="haramainSection">
      <div class="haramain-title">üïã Live Masjidil Haram ‚Äì Makkah</div>

      <div class="haramain-frame">
        <iframe
          id="haramainVideo"
          src="https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=1&controls=0&rel=0&modestbranding=1"
          allow="autoplay; encrypted-media"
          allowfullscreen>
        </iframe>
      </div>
    </div>

  </div>
  <!-- ===== END AREA TENGAH ===== -->

  <!-- RUNNING TEXT -->
  <div class="marquee">
    <span>
      Selamat datang di Masjid ‚Ä¢ Mohon matikan atau senyapkan HP ‚Ä¢ Jaga kekhusyukan ibadah
    </span>
  </div>

</div>
<!-- ===== LIVE HARAMAIN ===== -->
<div class="haramain-section" id="haramainSection">
  <div class="haramain-title">üïã Live Masjidil Haram ‚Äì Makkah</div>

  <div class="haramain-frame">
    <iframe
  id="haramainVideo"
  src="https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=1&controls=0&rel=0&modestbranding=1"
  allow="autoplay; encrypted-media"
  allowfullscreen>
    </iframe>
  </div>
</div>

<audio id="azanAudio"
src="https://cdn.islamic.network/quran/audio/128/ar.alafasy/1.mp3"></audio>

<script>
/* FULLSCREEN */
function openFullscreen(){
  if(document.documentElement.requestFullscreen){
    document.documentElement.requestFullscreen();
  }
}

/* JAM */
function updateClock(){
  const d=new Date();
  clock.innerText=d.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});
}
setInterval(updateClock,1000);updateClock();

/* TANGGAL */
tanggal.innerText=new Date().toLocaleDateString("id-ID",{
  weekday:"long",day:"numeric",month:"long",year:"numeric"
});

/* JADWAL SHOLAT */
fetch("https://api.aladhan.com/v1/timingsByCity?city=Cirebon&country=Indonesia&method=20")
.then(r=>r.json())
.then(res=>{
  const t=res.data.timings;
  const list=[
    ["Imsak",t.Imsak],
    ["Subuh",t.Fajr],
    ["Terbit",t.Sunrise],
    ["Dzuhur",t.Dhuhr],
    ["Ashar",t.Asr],
    ["Maghrib",t.Maghrib],
    ["Isya",t.Isha]
  ];
  sholatBar.innerHTML=list.map(s=>`
    <div class="sholat" data-time="${s[1]}">${s[0]}<b>${s[1]}</b></div>
  `).join("");
  cekWaktu();
  setInterval(cekWaktu,30000);
});

/* AZAN + IQOMAH */
let iqomahTimer=null;
function cekWaktu(){
  const now=new Date().toTimeString().slice(0,5);
  document.querySelectorAll(".sholat").forEach(el=>{
    if(el.dataset.time===now){
      el.classList.add("active");
      azanText.style.display="block";
      azanAudio.play();

      let sisa=600;
      iqomahText.style.display="block";
      iqomahTimer=setInterval(()=>{
        let m=Math.floor(sisa/60);
        let d=sisa%60;
        iqomahText.innerText=`IQOMAH ${m}:${d.toString().padStart(2,"0")}`;
        sisa--;
        if(sisa<0){
          clearInterval(iqomahTimer);
          iqomahText.style.display="none";
          azanText.style.display="none";
        }
      },1000);
    }else{
      el.classList.remove("active");
    }
  });
}
</script>
<script>
/* ===== LIVE HARAMAIN (5 MENIT ON / 1 MENIT OFF) ===== */

const haramain = document.getElementById("haramainSection");
const video = document.getElementById("haramainVideo");

// WAKTU (ms)
const SHOW_TIME = 5 * 60 * 1000; // 5 menit ON
const GAP_TIME  = 1 * 60 * 1000; // 1 menit OFF

function showHaramain(){
  haramain.classList.add("show");
  video.src =
    "https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=1&controls=0&rel=0&modestbranding=1";

  setTimeout(hideHaramain, SHOW_TIME);
}

function hideHaramain(){
  haramain.classList.remove("show");
  video.src = ""; // STOP video
  setTimeout(showHaramain, GAP_TIME);
}

// JALANKAN PERTAMA KALI
showHaramain();
</script>
  
<script>
document.getElementById("enableSound").onclick = function () {
  const video = document.getElementById("haramainVideo");

  video.src =
    "https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=0&controls=0&rel=0";

  this.style.display = "none";
};
</script>
<script>
  
let soundUnlocked = false;

document.getElementById("enableSound").onclick = function () {
  const video = document.getElementById("haramainVideo");

  // reload iframe dengan suara aktif
  video.src =
  soundUnlocked
    ? "https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=0&controls=0&rel=0"
    : "https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=1&controls=0&rel=0";
  soundUnlocked = true;
  this.innerText = "üîä Suara Aktif";
  this.style.background = "#16a34a";

  // sembunyikan tombol setelah aktif
  setTimeout(() => {
    this.style.display = "none";
  }, 1500);
};
</script>
  <script>
/* ===== AUTO FULLSCREEN MODE TV ===== */
document.addEventListener("DOMContentLoaded", () => {
  const ua = navigator.userAgent.toLowerCase();

  if(
    ua.includes("android tv") ||
    ua.includes("smart-tv") ||
    ua.includes("tv")
  ){
    setTimeout(() => {
      if (document.documentElement.requestFullscreen) {
        document.documentElement.requestFullscreen();
      }
    }, 1500);
  }
});
  </script>
 <script>
function highlightNextPrayer(){
  const now = new Date();
  let minDiff = 9999;
  let target = null;

  document.querySelectorAll(".sholat").forEach(el=>{
    const [h,m] = el.dataset.time.split(":");
    const t = new Date();
    t.setHours(h,m,0);

    const diff = (t - now) / 60000;
    if(diff > 0 && diff < minDiff){
      minDiff = diff;
      target = el;
    }
  });

  document.querySelectorAll(".sholat").forEach(e=>e.classList.remove("active"));
  if(target) target.classList.add("active");
}

setInterval(highlightNextPrayer,60000);
</script> 
  <script>
const hour = new Date().getHours();
if(hour >= 18 || hour <= 5){
  document.body.style.filter = "brightness(0.8)";
}
  </script>
</body>
</html>
