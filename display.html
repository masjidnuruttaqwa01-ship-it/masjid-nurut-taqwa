<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Display Masjid ‚Äì Jadwal Sholat & Live Haramain</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,sans-serif;
  color:#fff;
  overflow:hidden;
}

/* ===== BACKGROUND ===== */
.bg{
  position:fixed;
  inset:0;
  z-index:-2;
  background-size:cover;
  background-position:center;
  animation:bgSlide 30s infinite;
}
@keyframes bgSlide{
  0%{background-image:url('https://images.unsplash.com/photo-1585030179234-6d0f3a38d2f4')}
  33%{background-image:url('https://images.unsplash.com/photo-1588072432836-e10032774350')}
  66%{background-image:url('https://images.unsplash.com/photo-1600185365483-26d7c7f4c32c')}
  100%{background-image:url('https://images.unsplash.com/photo-1585030179234-6d0f3a38d2f4')}
}

/* ===== OVERLAY ===== */
.overlay{
  background:rgba(0,0,0,.55);
  min-height:100vh;
  position:relative;
  z-index:1;
}
  .overlay{
  position:relative;
  }

/* ===== HEADER ===== */
.header{
  padding:14px 20px;
  background:rgba(6,78,59,.85);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.header b{font-size:20px}
.clock{font-size:38px;font-weight:700}

/* ===== INFO ===== */
.info{
  text-align:center;
  margin:8px 0;
  font-size:14px;
}

/* ===== SHOLAT ===== */
.sholat-bar{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:6px;
  padding:12px;
}
.sholat{
  background:#0f766e;
  padding:14px 6px;
  border-radius:16px;
  text-align:center;
}
.sholat b{display:block;font-size:18px}
.active{
  background:#7c3aed;
  animation:pulse 1.2s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(124,58,237,.7)}
  70%{box-shadow:0 0 0 25px rgba(124,58,237,0)}
  100%{box-shadow:0 0 0 0 rgba(124,58,237,0)}
}

/* ===== AZAN ===== */
.azan{
  text-align:center;
  font-size:46px;
  font-weight:700;
  color:#facc15;
  display:none;
}

/* ===== IQOMAH ===== */
.iqomah{
  text-align:center;
  font-size:42px;
  font-weight:700;
  color:#22c55e;
  display:none;
}

/* ===== RUNNING TEXT ===== */
.marquee{
  position:absolute;
  bottom:0;
  width:100%;
  background:#064e3b;
  padding:10px;
  font-size:18px;
  white-space:nowrap;
  overflow:hidden;
}
.marquee span{
  display:inline-block;
  padding-left:100%;
  animation:marquee 25s linear infinite;
}
@keyframes marquee{
  0%{transform:translateX(0)}
  100%{transform:translateX(-100%)}
}

/* ===== LIVE HARAMAIN (TIDAK NUTUP LAYOUT) ===== */
.haramain-section{
  position:absolute;          /* ‚¨ÖÔ∏è BUKAN fixed */
  top:140px;                  /* ‚¨ÖÔ∏è di bawah header + jadwal */
  left:0;
  right:0;

  z-index:50;                 /* ‚¨ÖÔ∏è aman, tidak menimpa header */
  display:flex;
  justify-content:center;
  align-items:flex-start;

  background:transparent;     /* ‚¨ÖÔ∏è transparan */
  pointer-events:none;

  opacity:0;
  transition:opacity .6s ease;
}

.haramain-section.show{
  opacity:1;
  pointer-events:auto;
}

/* FRAME VIDEO */
.haramain-frame{
  width:92%;
  max-width:1100px;
  aspect-ratio:16 / 9;
  border-radius:22px;
  overflow:hidden;

  background:#000;
  box-shadow:0 25px 70px rgba(0,0,0,.35);
}

/* VIDEO */
.haramain-frame iframe{
  width:100%;
  height:100%;
  border:0;
}
</style>
</head>

<body onclick="openFullscreen()">
  <button id="enableSound"
style="
position:fixed;
top:16px;
right:16px;
z-index:99999;
padding:12px 16px;
border-radius:14px;
border:none;
background:#22c55e;
color:#fff;
font-weight:700;
font-size:14px;
box-shadow:0 8px 20px rgba(0,0,0,.35);
">
üîä Aktifkan Suara Live Ka'bah
  </button>

<div class="bg"></div>

<div class="overlay">

  <div class="header">
    <b>üïå Masjid ‚Äì Kota Cirebon</b>
    <div class="clock" id="clock">00:00</div>
  </div>

  <div class="info" id="tanggal"></div>

  <div class="azan" id="azanText">AZAN</div>
  <div class="iqomah" id="iqomahText">IQOMAH 10:00</div>

  <div class="sholat-bar" id="sholatBar"></div>

  <div class="marquee">
    <span>
      Selamat datang di Masjid ‚Ä¢ Mohon matikan atau senyapkan HP ‚Ä¢ Jaga kekhusyukan ibadah
    </span>
  </div>

</div>

<!-- ===== LIVE HARAMAIN ===== -->
<div class="haramain-section" id="haramainSection">
  <div class="haramain-title">üïã Live Masjidil Haram ‚Äì Makkah</div>

  <div class="haramain-frame">
    <iframe
  id="haramainVideo"
  src="https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=1&controls=0&rel=0&modestbranding=1"
  allow="autoplay; encrypted-media"
  allowfullscreen>
    </iframe>
  </div>
</div>

<audio id="azanAudio"
src="https://cdn.islamic.network/quran/audio/128/ar.alafasy/1.mp3"></audio>

<script>
/* FULLSCREEN */
function openFullscreen(){
  if(document.documentElement.requestFullscreen){
    document.documentElement.requestFullscreen();
  }
}

/* JAM */
function updateClock(){
  const d=new Date();
  clock.innerText=d.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"});
}
setInterval(updateClock,1000);updateClock();

/* TANGGAL */
tanggal.innerText=new Date().toLocaleDateString("id-ID",{
  weekday:"long",day:"numeric",month:"long",year:"numeric"
});

/* JADWAL SHOLAT */
fetch("https://api.aladhan.com/v1/timingsByCity?city=Cirebon&country=Indonesia&method=20")
.then(r=>r.json())
.then(res=>{
  const t=res.data.timings;
  const list=[
    ["Imsak",t.Imsak],
    ["Subuh",t.Fajr],
    ["Terbit",t.Sunrise],
    ["Dzuhur",t.Dhuhr],
    ["Ashar",t.Asr],
    ["Maghrib",t.Maghrib],
    ["Isya",t.Isha]
  ];
  sholatBar.innerHTML=list.map(s=>`
    <div class="sholat" data-time="${s[1]}">${s[0]}<b>${s[1]}</b></div>
  `).join("");
  cekWaktu();
  setInterval(cekWaktu,30000);
});

/* AZAN + IQOMAH */
let iqomahTimer=null;
function cekWaktu(){
  const now=new Date().toTimeString().slice(0,5);
  document.querySelectorAll(".sholat").forEach(el=>{
    if(el.dataset.time===now){
      el.classList.add("active");
      azanText.style.display="block";
      azanAudio.play();

      let sisa=600;
      iqomahText.style.display="block";
      iqomahTimer=setInterval(()=>{
        let m=Math.floor(sisa/60);
        let d=sisa%60;
        iqomahText.innerText=`IQOMAH ${m}:${d.toString().padStart(2,"0")}`;
        sisa--;
        if(sisa<0){
          clearInterval(iqomahTimer);
          iqomahText.style.display="none";
          azanText.style.display="none";
        }
      },1000);
    }else{
      el.classList.remove("active");
    }
  });
}
</script>
<script>
/* ===== LIVE HARAMAIN (5 MENIT ON / 1 MENIT OFF) ===== */

const haramain = document.getElementById("haramainSection");
const video = document.getElementById("haramainVideo");

// WAKTU (ms)
const SHOW_TIME = 5 * 60 * 1000; // 5 menit ON
const GAP_TIME  = 1 * 60 * 1000; // 1 menit OFF

function showHaramain(){
  haramain.classList.add("show");
  video.src =
    "https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=1&controls=0&rel=0&modestbranding=1";

  setTimeout(hideHaramain, SHOW_TIME);
}

function hideHaramain(){
  haramain.classList.remove("show");
  video.src = ""; // STOP video
  setTimeout(showHaramain, GAP_TIME);
}

// JALANKAN PERTAMA KALI
showHaramain();
</script>
  
<script>
document.getElementById("enableSound").onclick = function () {
  const video = document.getElementById("haramainVideo");

  video.src =
    "https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=0&controls=0&rel=0";

  this.style.display = "none";
};
</script>
<script>
  
let soundUnlocked = false;

document.getElementById("enableSound").onclick = function () {
  const video = document.getElementById("haramainVideo");

  // reload iframe dengan suara aktif
  video.src =
  soundUnlocked
    ? "https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=0&controls=0&rel=0"
    : "https://www.youtube.com/embed/qvTI4bKqucs?autoplay=1&mute=1&controls=0&rel=0";
  soundUnlocked = true;
  this.innerText = "üîä Suara Aktif";
  this.style.background = "#16a34a";

  // sembunyikan tombol setelah aktif
  setTimeout(() => {
    this.style.display = "none";
  }, 1500);
};
</script>
</body>
</html>
