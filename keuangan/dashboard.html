<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard Keuangan</title>
<style>
body{
  font-family:Poppins,Arial;
  background:#eef7f3;
  padding:20px;
}
.saldo{
  background:#0f6b44;
  color:white;
  padding:18px;
  border-radius:14px;
  font-size:20px;
  margin-bottom:20px;
}
.card{
  background:white;
  border-radius:14px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 10px 20px rgba(0,0,0,.12);
}
img{
  width:100%;
  border-radius:10px;
  margin-top:10px;
}
.logout{
  background:#b91c1c;
  color:white;
  padding:10px;
  border:none;
  border-radius:8px;
}
</style>
</head>
<body>

<button class="logout" onclick="logout()">Logout</button>
<h2>Keuangan Masjid Nurut Taqwa</h2>

<div id="saldo" class="saldo"></div>
<div id="list"></div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyIwIo6LHiTc01tTWmDX6H5sOq3qIrphSNa-SCLaGRqI2BlONT3VPHDnVIkMfOpBzHN/exec";

fetch(API_URL)
.then(res => res.json())
.then(data => {
  let html = "";
  let totalMasuk = 0;
  let totalKeluar = 0;

  data.forEach(row => {
    let jml = parseInt(row.jumlah);

    if(row.jenis === "Pemasukan") totalMasuk += jml;
    if(row.jenis === "Pengeluaran") totalKeluar += jml;

    html += `
      <tr>
        <td>${row.tanggal}</td>
        <td>${row.jenis}</td>
        <td>${row.keterangan}</td>
        <td>Rp ${jml.toLocaleString()}</td>
        <td><a href="${row.bukti}" target="_blank">ðŸ“·</a></td>
      </tr>
    `;
  });

  document.getElementById("tabelData").innerHTML = html;
  document.getElementById("masuk").innerText = totalMasuk.toLocaleString();
  document.getElementById("keluar").innerText = totalKeluar.toLocaleString();
  document.getElementById("saldo").innerText = (totalMasuk - totalKeluar).toLocaleString();
});
</script>

</body>
</html>
