<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard Keuangan Masjid</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Poppins,sans-serif;
  background:linear-gradient(135deg,#e8f5f0,#f6fff9);
}

.header{
  background:#0f6b44;
  color:white;
  padding:18px;
  text-align:center;
  font-size:20px;
  font-weight:700;
}

.container{
  padding:16px;
}

.logout{
  position:fixed;
  top:12px;
  right:12px;
  background:#dc2626;
  color:white;
  border:none;
  padding:10px 14px;
  border-radius:10px;
  font-weight:600;
}

.saldo-box{
  background:linear-gradient(135deg,#0f6b44,#1ba36a);
  color:white;
  border-radius:18px;
  padding:20px;
  text-align:center;
  margin-bottom:20px;
  box-shadow:0 12px 30px rgba(0,0,0,.2);
}

.saldo-box h2{
  margin:0;
  font-size:16px;
  opacity:.9;
}

.saldo-box h1{
  margin:10px 0 0;
  font-size:32px;
}

.stats{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin-bottom:20px;
}

.stat-card{
  background:white;
  padding:14px;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,.1);
}

.stat-card h3{
  margin:0;
  font-size:14px;
  color:#555;
}

.stat-card p{
  margin:6px 0 0;
  font-size:18px;
  font-weight:700;
}

.masuk{color:#16a34a;}
.keluar{color:#dc2626;}

.transaksi{
  margin-top:10px;
}

.transaksi h3{
  margin-bottom:10px;
}

.card{
  background:white;
  padding:14px;
  border-radius:16px;
  margin-bottom:12px;
  box-shadow:0 6px 18px rgba(0,0,0,.1);
}

.card .tgl{
  font-size:13px;
  color:#888;
}

.card .ket{
  font-weight:600;
  margin:4px 0;
}

.card .nominal{
  font-size:16px;
  font-weight:700;
}

.masuk-text{color:#16a34a;}
.keluar-text{color:#dc2626;}

.bukti{
  margin-top:6px;
  display:inline-block;
  font-size:13px;
  text-decoration:none;
  color:#0f6b44;
  font-weight:600;
}
</style>
</head>

<body>

<button class="logout" onclick="logout()">Logout</button>

<div class="header">
  Keuangan Masjid Nurut Taqwa
</div>

<div class="container">

  <div class="saldo-box">
    <h2>Saldo Kas Masjid</h2>
    <h1 id="saldo">Rp 0</h1>
  </div>

  <div class="stats">
    <div class="stat-card">
      <h3>Total Pemasukan</h3>
      <p class="masuk" id="masuk">Rp 0</p>
    </div>
    <div class="stat-card">
      <h3>Total Pengeluaran</h3>
      <p class="keluar" id="keluar">Rp 0</p>
    </div>
  </div>

  <div class="transaksi">
    <h3>Riwayat Transaksi</h3>
    <div id="list"></div>
  </div>

</div>

<script>
  <script>
if(localStorage.getItem("login")!=="true"){
  window.location="login.html";
}
</script>
if(localStorage.getItem("login")!=="true"){
  window.location="login.html";
}

function logout(){
  localStorage.removeItem("login");
  window.location="login.html";
}

const API="https://script.google.com/macros/s/AKfycbyIwIo6LHiTc01tTWmDX6H5sOq3qIrphSNa-SCLaGRqI2BlONT3VPHDnVIkMfOpBzHN/exec";

fetch(API)
.then(r=>r.json())
.then(data=>{
  let masuk=0, keluar=0, list="";

  data.forEach(d=>{
    let j=parseInt(d.jumlah);
    if(d.jenis=="Pemasukan") masuk+=j;
    else keluar+=j;

    list+=`
    <div class="card">
      <div class="tgl">${d.tanggal}</div>
      <div class="ket">${d.keterangan}</div>
      <div class="nominal ${d.jenis=="Pemasukan"?"masuk-text":"keluar-text"}">
        ${d.jenis}: Rp ${j.toLocaleString()}
      </div>
      <a class="bukti" href="${d.bukti}" target="_blank">ðŸ“· Lihat Bukti</a>
    </div>
    `;
  });

  document.getElementById("masuk").innerText="Rp "+masuk.toLocaleString();
  document.getElementById("keluar").innerText="Rp "+keluar.toLocaleString();
  document.getElementById("saldo").innerText="Rp "+(masuk-keluar).toLocaleString();
  document.getElementById("list").innerHTML=list;
});
</script>
<button onclick="logout()" class="logout-btn">Logout</button>

<script>
function logout(){
  localStorage.removeItem("login");
  window.location="login.html";
}
</script>
</body>
</html>
