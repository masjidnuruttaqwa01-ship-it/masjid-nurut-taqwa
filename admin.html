<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Remote TV Masjid</title>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#0f172a;
  color:#fff;
}
h2{
  text-align:center;
  margin:16px 0;
}
.btn{
  display:block;
  width:90%;
  margin:12px auto;
  padding:16px;
  font-size:18px;
  font-weight:700;
  border:none;
  border-radius:14px;
  background:#1e293b;
  color:#fff;
}
.wallpaper{background:#0ea5e9}
.video{background:#7c3aed}
.azan{background:#f59e0b}
.reset{background:#dc2626}
</style>
</head>

<body>

<h2>ðŸ“± Remote TV Masjid</h2>

<button class="btn wallpaper" onclick="remote('wallpaper')">
ðŸ–¼ Wallpaper
</button>

<button class="btn video" onclick="remote('video')">
ðŸŽ¥ Live Haramain
</button>

<button class="btn azan" onclick="remote('azan')">
ðŸ”Š AZAN
</button>

<button class="btn reset" onclick="remote('reset')">
â™» Reset TV
</button>

<script>
function remote(cmd){
  // simpan untuk device lain
  localStorage.setItem("tvCommand", cmd);
  localStorage.setItem("tvCommandTime", Date.now());

  // EKSEKUSI LANGSUNG (WAJIB)
  if(window.opener && window.opener.jalankanPerintah){
    window.opener.jalankanPerintah(cmd);
  }

  alert("Perintah dikirim: " + cmd);
}
</script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const sb = supabase.createClient(
  "https://xntiicnhmhgpujeekmxt.supabase.co",
  "sb_publishable_UPlHKhBcNEYT5aLmLojV4Q_syk6dJUI"
);

async function remote(cmd){
  await sb.from("tv_control")
    .update({ command: cmd })
    .eq("id", 1);

  alert("Dikirim: " + cmd);
}
</script>
</body>
</html>
